2024-12-05 01:50:30,199 - ERROR - Exception on /add_document [POST] - [in /Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/flask/app.py:875]
Traceback (most recent call last):
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/flask/app.py", line 915, in full_dispatch_request
    rv = self.preprocess_request()
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/flask/app.py", line 1291, in preprocess_request
    rv = self.ensure_sync(before_func)()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/src/backend/routes.py", line 14, in initialize_services
    vector_store = VectorStore(app.config)
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/src/backend/service/vector_store.py", line 22, in __init__
    if not client.collection_exists(VECTORSTORE_COLLECTION_NAME):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 2097, in collection_exists
    return self._client.collection_exists(collection_name=collection_name, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 2618, in collection_exists
    return self.grpc_collections.CollectionExists(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/grpc/_interceptor.py", line 277, in __call__
    response, ignored_call = self._with_call(
                             ^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/grpc/_interceptor.py", line 332, in _with_call
    return call.result(), call
           ^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/grpc/_channel.py", line 440, in result
    raise self
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/grpc/_interceptor.py", line 315, in continuation
    response, call = self._thunk(new_method).with_call(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/grpc/_channel.py", line 1198, in with_call
    return _end_unary_response_blocking(state, call, True, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/grpc/_channel.py", line 1006, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNAVAILABLE
	details = "DNS resolution failed for qdrant_service:6334: C-ares status is not ARES_SUCCESS qtype=A name=qdrant_service is_balancer=0: Domain name not found"
	debug_error_string = "UNKNOWN:Error received from peer  {grpc_message:"DNS resolution failed for qdrant_service:6334: C-ares status is not ARES_SUCCESS qtype=A name=qdrant_service is_balancer=0: Domain name not found", grpc_status:14, created_time:"2024-12-05T01:50:30.198755+08:00"}"
>
2024-12-05 01:54:10,482 - ERROR - Exception on /add_document [POST] - [in /Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/flask/app.py:875]
Traceback (most recent call last):
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/flask/app.py", line 915, in full_dispatch_request
    rv = self.preprocess_request()
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/flask/app.py", line 1291, in preprocess_request
    rv = self.ensure_sync(before_func)()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/src/backend/routes.py", line 14, in initialize_services
    vector_store = VectorStore(app.config)
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/src/backend/service/vector_store.py", line 22, in __init__
    if not client.collection_exists(VECTORSTORE_COLLECTION_NAME):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 2097, in collection_exists
    return self._client.collection_exists(collection_name=collection_name, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 2618, in collection_exists
    return self.grpc_collections.CollectionExists(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/grpc/_interceptor.py", line 277, in __call__
    response, ignored_call = self._with_call(
                             ^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/grpc/_interceptor.py", line 332, in _with_call
    return call.result(), call
           ^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/grpc/_channel.py", line 440, in result
    raise self
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/grpc/_interceptor.py", line 315, in continuation
    response, call = self._thunk(new_method).with_call(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/grpc/_channel.py", line 1198, in with_call
    return _end_unary_response_blocking(state, call, True, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/grpc/_channel.py", line 1006, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.UNAVAILABLE
	details = "failed to connect to all addresses; last error: UNAVAILABLE: ipv4:34.142.165.16:6334: Failed to connect to remote host: Timeout occurred: FD shutdown"
	debug_error_string = "UNKNOWN:Error received from peer  {grpc_message:"failed to connect to all addresses; last error: UNAVAILABLE: ipv4:34.142.165.16:6334: Failed to connect to remote host: Timeout occurred: FD shutdown", grpc_status:14, created_time:"2024-12-05T01:54:10.482025+08:00"}"
>
2024-12-05 01:56:04,031 - INFO - Processing document: CP 83-1-2004 (2015) CoP for construction CAD - Organisation n naming of CAD layers.pdf - [in /Users/dylim/Documents/projects/RAG_Langchain/src/backend/routes.py:39]
2024-12-05 01:56:09,147 - ERROR - Error processing document: Cannot open empty file: filename='/tmp/CP 83-1-2004 (2015) CoP for construction CAD - Organisation n naming of CAD layers.pdf'. - [in /Users/dylim/Documents/projects/RAG_Langchain/src/backend/routes.py:68]
Traceback (most recent call last):
  File "/Users/dylim/Documents/projects/RAG_Langchain/src/backend/routes.py", line 45, in add_document
    split_document_paths = document_processor.split_pdf_if_needed(temp_path)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/src/backend/service/document_processor.py", line 302, in split_pdf_if_needed
    self.metadata.file_guid = str(self.get_doc_guid(file_path))
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/src/backend/service/document_processor.py", line 360, in get_doc_guid
    with pymupdf.open(file_path) as doc:
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylim/Documents/projects/RAG_Langchain/env/lib/python3.11/site-packages/pymupdf/__init__.py", line 2962, in __init__
    raise EmptyFileError(f'Cannot open empty file: {filename=}.')
pymupdf.EmptyFileError: Cannot open empty file: filename='/tmp/CP 83-1-2004 (2015) CoP for construction CAD - Organisation n naming of CAD layers.pdf'.
2024-12-05 02:04:01,556 - INFO - Processing document: CP 83-1-2004 (2015) CoP for construction CAD - Organisation n naming of CAD layers.pdf - [in /Users/dylim/Documents/projects/RAG_Langchain/src/backend/routes.py:39]
2024-12-05 02:10:12,405 - INFO - Document CP 83-1-2004 (2015) CoP for construction CAD - Organisation n naming of CAD layers.pdf processed successfully. - [in /Users/dylim/Documents/projects/RAG_Langchain/src/backend/routes.py:51]
2024-12-05 02:20:19,763 - INFO - Received question: Singapore CAD Layer standard naming convention - [in /Users/dylim/Documents/projects/RAG_Langchain/src/backend/routes.py:85]
